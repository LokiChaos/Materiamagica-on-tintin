#!/bin/bash

# tmux Server and Session names
TSESSION="MM"
TSERVER="ttGame"
TINTINDIR=~/.tt

# Check if the session exists, if so attach it, else make MM
if [ $(tmux -L ${TSERVER} ls 2>/dev/null | grep -c "^${TSESSION}:") != 0 ]; then
	echo "Session ${TSESSION} already exists. Attaching."
	tmux -L ${TSERVER} att -t ${TSESSION}
	exit 0;
else
	echo "Session ${TSESSION} does not exist. Creating."
	cd ${TINTINDIR}
	tmux -L ${TSERVER} new -d -s ${TSESSION} "tt++ -G core/master.tt"
	tmux -L ${TSERVER} source-file etc/tmux.conf
	tmux -L ${TSERVER} source-file etc/tmux.client.conf
	tmux -L ${TSERVER} att -t ${TSESSION}
fi
